{% extends 'frontenduser/base.html' %}
{% load static %}
{% block title %}
    Mac软件分享平台
{% endblock %}
{% block style %}
    <style>
        .description-layout {
            width: 70%;
            text-indent: 2em;
            margin: 0 auto;
        }

        @media(min-height: 768px) {
            .swal2-modal {
                width: 100% !important;
            }
            
            .swal2-modal::-webkit-scrollbar {
                display: none !important;
            }
        }
    </style>
{% endblock %}
{% block content %}
    <div class="loading_container">
        <div class="loading"><i></i><i></i><i></i><i></i></div>
    </div>
    <body class="app-template-default single single-app postid-1428 sidebar_no app">
    {% include 'frontenduser/sidebar.html' %}
    <div class="main-content flex-fill">
        {% include 'frontenduser/header-nav.html' %}
        <div id="content" class="container my-4 my-md-5">
            <div class="background-fx">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-01.svg"
                        class="shape-01" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-02.svg" class="shape-02" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-03.svg" class="shape-03" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-04.svg" class="shape-04" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-05.svg" class="shape-05" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-06.svg" class="shape-06" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-07.svg" class="shape-07" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-08.svg" class="shape-08" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-09.svg" class="shape-09" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-10.svg" class="shape-10" alt="">
                <img
                        src="{% static 'front/img/software_details/background/' %}shape-11.svg" class="shape-11" alt="">
            </div>
            <div class="row app-content py-5 mb-xl-5 mb-0 mx-xxxl-n5"><!-- software信息 -->
                <div class="col">
                    <div class="d-md-flex mt-n3 mb-5 my-xl-0">
                        <div class="app-ico text-center mr-0 mr-md-2 mb-3 mb-md-0"><img
                                class="app-rounded mr-0 mr-md-3 lazy unfancybox loaded"
                                src="{{ software.icon.url }}"
                                data-src="{{ software.icon.url }}" height="auto"
                                width="128"
                                alt="{{ software.name }}" data-was-processed="true"></div>
                        <div class="app-info"><h1 class="h3 text-center text-md-left mb-0">{{ software.name }}
                            <span class="text-md">- {{ software.version }}</span></h1>
                            <p class="text-xs text-center text-md-left my-1">{{ software.description|truncatechars:30 }}</p>
                            <div class="app-nature text-center text-md-left mb-5 mb-md-4"><span
                                    class="badge badge-pill vc-black mr-1"><i
                                    class="fa fa-language mr-2"></i>{{ software.language }}</span><span
                                    class="badge badge-pill vc-black mr-1"><i
                                    class="fa fa-laptop mr-2"></i>{{ software.platform }}</span><span
                                    class="badge badge-pill vc-black mr-1"><i
                                    class="iconfont icon-chakan-line mr-2"></i>
                                {% if software.view_volume == 0 %}
                                    1
                                {% else %}
                                    {{ software.view_volume }}
                                {% endif %}
                            </span>
                            </div>
                            <p class="text-muted mb-4"><span
                                    class="info-term mr-3">更新日期：{{ software.updated_time|date }}</span>
                                <br/><span
                                        class="info-term mr-3">标签：<span class="mr-2" id="tag-space"
                                                                          data-tags="{{ software.tags }}"></span></span>
                                <br/><span
                                        class="info-term mr-3">运行系统版本：{{ software.run_os_version }}</span>
                                <br/><span
                                        class="info-term mr-3">分类：<a class="category_link_{{ software.category.id }}"
                                                                       onmouseleave="default_href()"
                                                                       onmouseout="default_href()"
                                                                       onmousemove="re_href_category('{{ software.category.id }}')"
                                                                       href="">{{ software.category }}<i
                                        class="iconfont icon-wailian text-ss"></i></a></span></p>
                            <div class="mb-2 app-button">
                                <button type="button" onclick="download_modal(storage_software_info())"
                                        class="btn btn-lg px-4 text-lg radius-50 btn-danger custom_btn-d btn_down mr-3 mb-2"><i
                                        class="iconfont icon-down mr-2"></i>立即下载
                                </button>
                                <button type="button" id="software-{{ software.id }}"
                                        onclick="thumb_software('{{ software.id }}', 1)"
                                        class="btn btn-lg px-4 text-lg radius-50 btn-outline-danger custom_btn-outline mb-2">
                                    <i class="iconfont icon-like mr-2"></i> 赞 <span
                                        class="like-count ">{{ software.thumbs_volume }}</span>
                                </button>
                            </div>
                            <p class="mb-0 text-muted text-sm">
                                <span class="mr-2">
                                    <i class="fa fa-file-archive-o"></i>
                                    <span>{{ software.file_size }}
                                    </span>
                                </span>
                                <span class="mr-2">
                                    <i class="iconfont icon-qushitubiao"></i>
                                    <span class="down-count-text count-a">
                                        {{ software.download_volume }}
                                    </span> 人已下载
                                </span>
                            </p>
                        </div>
                    </div>
                </div><!-- software信息 END -->
                {% if software.screenshots_set.count > 0 %}
                    <!-- 截图幻灯片 -->
                    <div class="col-12 col-xl-5">
                        <div class="mx-auto screenshot-carousel rounded-lg">
                            <div id="carousel" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner" role="listbox">
                                    {% for screenshot in software.screenshots_set %}
                                        <div class="carousel-item {% if forloop.counter == 1 %}active{% endif %}">
                                            <div class="img_wrapper"><a
                                                    href="{{ screenshot.image.url }}"
                                                    class="text-center" data-fancybox="screen"
                                                    data-caption="{{ software.name }}的使用截图[{{ screenshot.id }}]"><img
                                                    class="img-fluid lazy unfancybox loaded"
                                                    src="{{ screenshot.image.url }}"
                                                    data-src="{{ screenshot.image.url }}"
                                                    height="auto"
                                                    width="auto"
                                                    alt="{{ software.name }}的使用截图[{{ screenshot.id }}]"
                                                    data-was-processed="true"></a></div>
                                        </div>
                                    {% endfor %}
                                </div>
                                {% if software.screenshots_set.count > 1 %}
                                    <ol class="carousel-indicators">
                                        {% with n=software.screenshots_set.count_list %}
                                            {% for i in n %}
                                                <li data-target="#carousel" data-slide-to="{{ forloop.counter0 }}"
                                                    class="{% if forloop.counter == 1 %}active{% endif %}"></li>
                                            {% endfor %}
                                        {% endwith %}
                                    </ol>
                                    <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev"><i
                                            class="iconfont icon-arrow-l icon-lg" aria-hidden="true"></i><span
                                            class="sr-only">上一个</span></a><a
                                        class="carousel-control-next" href="#carousel" role="button"
                                        data-slide="next"><i
                                        class="iconfont icon-arrow-r icon-lg" aria-hidden="true"></i><span
                                        class="sr-only">下一个</span></a></div>
                                {% else %}
                                    <ol class="carousel-indicators">
                                        <li data-target="#carousel" data-slide-to="0" class="active"></li>
                                    </ol>
                                {% endif %}
                        </div>
                    </div>
                    <!-- 截图幻灯片 END -->
                {% endif %}
            </div>
            <main class="content" role="main">
                <div class="content-wrap">
                    <div class="content-layout">
                        <div class="panel site-content card transparent">
                            <div class="card-body p-0">
                                <div class="apd-bg">
                                </div>
                                <div class="panel-body single my-4 description-layout">
                                    {{ software.description.length }}
                                    {{ software.description }}
                                </div>
                            </div>
                        </div>
                        <h2 class="text-gray text-lg my-4"><i class="site-tag iconfont icon-tag icon-lg mr-1"></i>相关软件
                        </h2>
                        <div class="row mb-n4">
                            <div class="col-4 col-md-3 col-lg-2 pb-1">
                                <div class="card-app default list-item">
                                    <div class="media p-0 app-rounded"
                                         style="background-image: linear-gradient(130deg, #f9f9f9, #e8e8e8);">
                                        <a class="media-content" href="https://macwk.cn/app/1333.html" target="_blank"
                                           data-bg="url(https://macwk.cn/wp-content/uploads/2023/11/1673090717_icon.webp)"
                                           style="background-size: 100%; background-image: url('https://macwk.cn/wp-content/uploads/2023/11/1673090717_icon.webp');"
                                           data-was-processed="true"></a>
                                    </div>
                                    <div class="list-content text-center pt-2">
                                        <div class="list-body ">
                                            <a href="https://macwk.cn/app/1333.html" target="_blank"
                                               class=" list-title text-md overflowClip_1">
                                                EazyDraw
                                            </a>
                                            <div class="mt-1">
                                                <div class="list-subtitle text-muted text-xs overflowClip_1">
                                                    EazyDraw 是表达和传递知识的高效工具。仅靠文字是不足以传达信息、概念和想法的。利用内置文本、符号和图表扩展您的创造力。
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-md-3 col-lg-2 pb-1">
                                <div class="card-app default list-item">
                                    <div class="media p-0 app-rounded"
                                         style="background-image: linear-gradient(130deg, #f9f9f9, #e8e8e8);">
                                        <a class="media-content" href="https://macwk.cn/app/1115.html" target="_blank"
                                           data-bg="url(https://macwk.cn/wp-content/uploads/2023/10/icon-1.png)"
                                           style="background-size: 85%; background-image: url('https://macwk.cn/wp-content/uploads/2023/10/icon-1.png');"
                                           data-was-processed="true"></a>
                                    </div>
                                    <div class="list-content text-center pt-2">
                                        <div class="list-body ">
                                            <a href="https://macwk.cn/app/1115.html" target="_blank"
                                               class=" list-title text-md overflowClip_1">
                                                AYVY
                                            </a>
                                            <div class="mt-1">
                                                <div class="list-subtitle text-muted text-xs overflowClip_1">
                                                    AYVY是一款美观、简单、快速、方便的图像查看器。我们已经涵盖了您需要的一切！
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-md-3 col-lg-2 pb-1">
                                <div class="card-app default list-item">
                                    <div class="media p-0 app-rounded"
                                         style="background-image: linear-gradient(130deg, #f9f9f9, #e8e8e8);">
                                        <a class="media-content" href="https://macwk.cn/app/607.html" target="_blank"
                                           data-bg="url(https://macwk.cn/wp-content/uploads/2023/09/acadlogo.png)"
                                           style="background-size: 100%; background-image: url('https://macwk.cn/wp-content/uploads/2023/09/acadlogo.png');"
                                           data-was-processed="true"></a>
                                    </div>
                                    <div class="list-content text-center pt-2">
                                        <div class="list-body ">
                                            <a href="https://macwk.cn/app/607.html" target="_blank"
                                               class=" list-title text-md overflowClip_1">
                                                AutoCAD 2024
                                            </a>
                                            <div class="mt-1">
                                                <div class="list-subtitle text-muted text-xs overflowClip_1">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-md-3 col-lg-2 pb-1">
                                <div class="card-app default list-item">
                                    <div class="media p-0 app-rounded"
                                         style="background-image: linear-gradient(130deg, #f9f9f9, #e8e8e8);">
                                        <a class="media-content" href="https://macwk.cn/app/1263.html" target="_blank"
                                           data-bg="url(https://macwk.cn/wp-content/uploads/2023/10/1670944015_icon.webp)"
                                           style="background-size: 100%; background-image: url(https://macwk.cn/wp-content/uploads/2023/10/1670944015_icon.webp);"
                                           data-was-processed="true"></a>
                                    </div>
                                    <div class="list-content text-center pt-2">
                                        <div class="list-body ">
                                            <a href="https://macwk.cn/app/1263.html" target="_blank"
                                               class=" list-title text-md overflowClip_1">
                                                SILKYPIX Developer Studio Pro
                                            </a>
                                            <div class="mt-1">
                                                <div class="list-subtitle text-muted text-xs overflowClip_1">
                                                    SILKYPIX Developer Studio Pro 是一款可让您编辑、处理和转换各种格式的数码照片。
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-md-3 col-lg-2 pb-1">
                                <div class="card-app default list-item">
                                    <div class="media p-0 app-rounded"
                                         style="background-image: linear-gradient(130deg, #f9f9f9, #e8e8e8);">
                                        <a class="media-content" href="https://macwk.cn/app/1513.html" target="_blank"
                                           data-bg="url(https://macwk.cn/wp-content/uploads/2023/11/1627992300_live-home-3d-pro.png)"
                                           style="background-size: 100%; background-image: url('https://macwk.cn/wp-content/uploads/2023/11/1627992300_live-home-3d-pro.png');"
                                           data-was-processed="true"></a>
                                    </div>
                                    <div class="list-content text-center pt-2">
                                        <div class="list-body ">
                                            <a href="https://macwk.cn/app/1513.html" target="_blank"
                                               class=" list-title text-md overflowClip_1">
                                                Live Home 3D Pro
                                            </a>
                                            <div class="mt-1">
                                                <div class="list-subtitle text-muted text-xs overflowClip_1">
                                                    Live Home 3D Pro
                                                    是一款直观的应用程序，适用于公寓和房屋的室内设计以及几乎任何复杂的景观。专业版提供了一组扩展的工具和独特的导出质量。
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-md-3 col-lg-2 pb-1">
                                <div class="card-app default list-item">
                                    <div class="media p-0 app-rounded"
                                         style="background-image: linear-gradient(130deg, #f9f9f9, #e8e8e8);">
                                        <a class="media-content" href="https://macwk.cn/app/1636.html" target="_blank"
                                           data-bg="url(https://macwk.cn/wp-content/uploads/2023/12/12322.webp)"
                                           style="background-size: 100%; background-image: url('https://macwk.cn/wp-content/uploads/2023/12/12322.webp');"
                                           data-was-processed="true"></a>
                                    </div>
                                    <div class="list-content text-center pt-2">
                                        <div class="list-body ">
                                            <a href="https://macwk.cn/app/1636.html" target="_blank"
                                               class=" list-title text-md overflowClip_1">
                                                HitPaw Photo Object Remover
                                            </a>
                                            <div class="mt-1">
                                                <div class="list-subtitle text-muted text-xs overflowClip_1">
                                                    使用 HitPaw 照片对象删除器可以自动跟踪和识别对象，并帮助您通过几个简单的步骤从照片中删除您想要的任何内容。
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- comments -->
                        <div id="comments" class="comments">
                            <h2 id="comments-list-title" class="comments-title h5 mx-1 my-4">
                                <i class="iconfont icon-comment"></i>
                                <span class="noticom">
			<a href="https://macwk.cn/app/1428.html#respond" class="comments-title">暂无评论</a> 
		</span>
                            </h2>
                            <div class="card">
                                <div class="card-body">
                                    <div id="respond_box">
                                        <div id="respond" class="comment-respond">
                                            <form class="text-sm mb-4" method="post"
                                                  enctype="multipart/form-data">
                                                {% csrf_token %}
                                                <div class="visitor-avatar d-flex flex-fill mb-2">
                                                    <img class="v-avatar rounded-circle"
                                                         src="https://macwk.cn/wp-content/themes/onenav/images/gravatar.jpg"
                                                         alt="">
                                                </div>
                                                <div class="comment-textarea mb-3">
                                                    <label for="comment"></label><textarea name="comment" id="comment"
                                                                                           class="form-control"
                                                                                           placeholder="输入评论内容..."
                                                                                           tabindex="4" cols="50"
                                                                                           rows="3"></textarea>
                                                </div>

                                                <div id="comment-author-info" class="row  row-sm">
                                                    <div class="col-12 col-md-6 mb-3"><label for="author"></label><input
                                                            type="text" name="author" id="author" class="form-control"
                                                            value="" size="22" placeholder="昵称" tabindex="2"></div>
                                                    <div class="col-12 col-md-6 mb-3"><label for="email"></label><label
                                                            for="email"></label><input type="text" name="email"
                                                                                       id="email"
                                                                                       class="form-control" value=""
                                                                                       size="22" placeholder="邮箱"
                                                                                       tabindex="3"></div>
                                                </div>
                                                <div class="com-footer d-flex justify-content-end flex-wrap">
                                                    <input type="hidden" id="_wpnonce" name="_wpnonce"
                                                           value="23bd96acec"><input type="hidden"
                                                                                     name="_wp_http_referer"
                                                                                     value="/app/1428.html"> <a
                                                        rel="nofollow" id="cancel-comment-reply-link"
                                                        style="display: none;"
                                                        href="javascript:"
                                                        class="btn btn-light custom_btn-outline mx-2">再想想</a>
                                                    <button class="btn btn-dark custom_btn-d ml-2">发表评论
                                                    </button>
                                                    <input type="hidden" name="action" value="ajax_comment">
                                                    <input type="hidden" name="comment_post_ID" value="1428"
                                                           id="comment_post_ID">
                                                    <input type="hidden" name="comment_parent" id="comment_parent"
                                                           value="0">
                                                </div>
                                            </form>
                                            <div class="clear"></div>
                                        </div>
                                    </div>
                                    <div id="loading-comments"><span></span></div>
                                    <div class="not-comment card">
                                        <div class="card-body nothing text-center color-d">暂无评论...</div>
                                    </div>
                                </div>
                            </div>
                        </div><!-- comments end -->
                    </div><!-- content-layout end -->
                </div><!-- content-wrap end -->
            </main>
        </div>
    </div><!-- main-content end -->
{% endblock %}
</body>
{% block script %}
    <script>
		$(document).ready(function () {
			get_notice_to_specific_app('{{ csrf_token }}', '{{ software_id }}');
			fill_in_tags();
		});
		
		function fill_in_tags() {
			let tag_space = $('#tag-space')[0];
			tags = split_tags(tag_space.getAttribute('data-tags'));
			for (let i = 0; i < tags.length; i++) {
				tag_space.innerHTML += tags[i];
				tag_space.innerHTML += '&nbsp;&nbsp;&nbsp;&nbsp;';
			}
		}

		function storage_software_info() {
			let map = new Map();
			map.set('id', '{{ software.id }}');
			map.set('name', '{{ software.name }}');
			map.set('version', '{{ software.version }}');
			map.set('link_adrive', '{{ software.link_adrive }}');
            map.set('link_baidu', '{{ software.link_baidu }}');
			map.set('link_direct', '{{ software.link_direct }}');
			map.set('link_123', '{{ software.link_123 }}');
			return map;
		}
    </script>
{% endblock %}
